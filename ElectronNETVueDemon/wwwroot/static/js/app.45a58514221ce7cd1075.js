webpackJsonp([6],{"19nU":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterAsyncRoutes=a;var i=s("YaEn");function a(e,t){const s=[];return e.forEach(e=>{const i=Object.assign({},e);(function(e,t){return!t.meta||!t.meta.permissions||e.some(e=>t.meta.permissions.includes(e))})(t,i)&&(i.children&&(i.children=a(i.children,t)),s.push(i))}),s}const n={SET_ROUTES:(e,t)=>{e.addRoutes=t,e.routes=i.b.concat(t)}},o={generateRoutes:({commit:e},t)=>new Promise(s=>{const n=a(i.a,t);e("SET_ROUTES",n),s(n)})};t.default={namespaced:!0,state:{routes:[],addRoutes:[]},mutations:n,actions:o}},F5sT:function(e,t){e.exports={title:"DotnetVue ElementAdmin",showSettings:!1,tagsView:!1,fixedHeader:!1,sidebarLogo:!1,errorLog:"production"}},IcnI:function(e,t,s){"use strict";var i=s("7+uW"),a=s("NYxO");var n={sidebar:e=>e.app.sidebar,size:e=>e.app.size,device:e=>e.app.device,visitedViews:e=>e.tagsView.visitedViews,cachedViews:e=>e.tagsView.cachedViews,token:e=>e.user.token,avatar:e=>e.user.avatar,name:e=>e.user.name,introduction:e=>e.user.introduction,permissions:e=>e.user.permissions,permission_routes:e=>e.permission.routes,errorLogs:e=>e.errorLog.logs};i.default.use(a.a);const o=s("w+hY"),r=o.keys().reduce((e,t)=>{const s=t.replace(/^\.\/(.*)\.\w+$/,"$1"),i=o(t);return e[s]=i.default,e},{}),c=new a.a.Store({modules:r,getters:n});t.a=c},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),a=s("zL8q"),n=s.n(a),o=(s("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var r=s("VU/8")({name:"App"},o,!1,function(e){s("XqpZ")},null,null).exports,c=s("IcnI"),l=s("YaEn"),d=s("Y81h"),u=s.n(d),h=(s("UVIz"),s("TIfe")),m=s("F5sT");const p=s.n(m).a.title||"DotnetVue ElementAdmin";var E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e};u.a.configure({showSpinner:!1});const _=["/account/login","/404"];var f;l.c.beforeEach(async(e,t,s)=>{if(document.title=(f=e.meta.title)?`${f} - ${p}`:`${p}`,Object(h.a)()){if("/account/login"===e.path)return s({path:"/dashboard"});if(c.a.getters.permissions&&c.a.getters.permissions.length>0)return s();try{let{permissions:t}=await c.a.dispatch("user/getInfo"),i=await c.a.dispatch("permission/generateRoutes",t);return l.c.addRoutes(i),s(E({},e,{replace:!0}))}catch(t){return await c.a.dispatch("user/resetToken"),a.Message.error(t||"Has Error"),s(`/account/login?redirect=${e.path}`)}}return-1!==_.indexOf(e.path)?s():s(`/account/login?redirect=${e.path}`)}),l.c.afterEach(()=>{}),i.default.config.productionTip=!1,i.default.use(n.a,{size:"small",zIndex:3e3}),new i.default({el:"#app",router:l.c,store:c.a,components:{App:r},template:"<App/>"})},THyH:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("F5sT"),a=s.n(i);const{title:n,showSettings:o,tagsView:r,fixedHeader:c,sidebarLogo:l}=a.a,d={title:n,showSettings:o,tagsView:r,fixedHeader:c,sidebarLogo:l},u={changeSetting({commit:e},t){e("CHANGE_SETTING",t)}};t.default={namespaced:!0,state:d,mutations:{CHANGE_SETTING:(e,{key:t,value:s})=>{e.hasOwnProperty(t)&&(e[t]=s)}},actions:u}},TIfe:function(e,t,s){"use strict";t.a=function(){return a.a.get(n)},t.c=function(e){return a.a.set(n,e)},t.b=function(){return a.a.remove(n)};var i=s("lbHh"),a=s.n(i);const n="Token"},UVIz:function(e,t){},WSTi:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("lbHh"),a=s.n(i);const n={sidebar:{opened:!a.a.get("sidebarStatus")||!!+a.a.get("sidebarStatus"),withoutAnimation:!1},device:"desktop",size:a.a.get("size")||"medium"},o={TOGGLE_SIDEBAR:e=>{e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1,e.sidebar.opened?a.a.set("sidebarStatus",1):a.a.set("sidebarStatus",0)},CLOSE_SIDEBAR:(e,t)=>{a.a.set("sidebarStatus",0),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:(e,t)=>{e.device=t},SET_SIZE:(e,t)=>{e.size=t,a.a.set("size",t)}},r={toggleSideBar({commit:e}){e("TOGGLE_SIDEBAR")},closeSideBar({commit:e},{withoutAnimation:t}){e("CLOSE_SIDEBAR",t)},toggleDevice({commit:e},t){e("TOGGLE_DEVICE",t)},setSize({commit:e},t){e("SET_SIZE",t)}};t.default={namespaced:!0,state:n,mutations:o,actions:r}},XqpZ:function(e,t){},YaEn:function(e,t,s){"use strict";var i=s("7+uW"),a=s("/ocq"),n={name:"AppMain",props:{height:{type:String,default:"auto"}},computed:{styleObject(){return{height:this.height}},key(){return this.$route.fullPath}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-main",{style:this.styleObject},[t("router-view",{key:this.key})],1)},staticRenderFns:[]},r=s("VU/8")(n,o,!1,null,null,null).exports,c=s("F5sT"),l=s.n(c),d=s("IcnI"),u={data(){return{name:this.$store.state.user.name,avatar:this.$store.state.user.avatar}},methods:{async logout(){await d.a.dispatch("user/resetToken"),window.location.reload()}}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-menu",{attrs:{mode:"horizontal","background-color":"#2b303b","text-color":"#fff","active-text-color":"#fff"}},[s("el-submenu",{attrs:{index:"account"}},[s("template",{slot:"title"},[s("el-avatar",{attrs:{shape:"square",size:"medium",src:e.avatar}}),e._v(" "),s("span",[e._v(e._s(e.name))])],1),e._v(" "),s("el-menu-item",[e._v("个人设置")]),e._v(" "),s("el-menu-item",{on:{click:e.logout}},[e._v("\n            安全登出\n        ")])],2)],1)},staticRenderFns:[]},m={name:"AppHeader",components:{Navbar:s("VU/8")(u,h,!1,null,null,null).exports},props:{isCollapse:{type:Boolean,default:!1},collapseHandle:{type:Function,default:function(){}}},data:()=>({title:l.a.title,logo:"static/img/logo.png"})},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-header",[s("router-link",{staticClass:"logo",attrs:{to:"/dashboard"}},[e.logo?s("img",{staticClass:"sidebar-logo",attrs:{src:e.logo}}):e._e(),e._v(" "),s("span",[e._v(e._s(e.title))])]),e._v(" "),s("navbar")],1)},staticRenderFns:[]},E=s("VU/8")(m,p,!1,null,null,null).exports,_=s("o/zv"),f=s.n(_);function V(e){return/^(https?:|mailto:|tel:)/.test(e)}var v={name:"SidebarMenuItem",components:{SidebarMenuItem:g},props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},data:()=>({onlyOneChild:null}),methods:{hasOneShowingChild(e=[],t){const s=e.filter(e=>!e.hidden&&(this.onlyOneChild=e,!0));return 1===s.length||0===s.length&&(this.onlyOneChild=Object.assign({},t),!0)},resolvePath(e){return V(e)?e:V(this.basePath)?this.basePath:f.a.resolve(this.basePath,e)},convertTitle:e=>e&&e.title?e.title:"",convertIcon:e=>e&&e.icon?e.icon:""}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return!e.item.hidden&&e.hasOneShowingChild(e.item.children,e.item)?s("el-menu-item",{attrs:{index:e.resolvePath(e.onlyOneChild.path)}},[e.onlyOneChild.meta?[s("i",{class:e.convertIcon(e.onlyOneChild.meta)}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.convertTitle(e.onlyOneChild.meta)))])]:[s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.convertTitle(e.onlyOneChild.meta)))])]],2):e.item.hidden?e._e():s("el-submenu",{attrs:{index:e.resolvePath(e.item.path)}},[e.item.meta?s("template",{slot:"title"},[s("i",{class:e.convertIcon(e.item.meta)}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.convertTitle(e.item.meta)))])]):s("template",{slot:"title"},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.convertTitle(e.item.meta)))])]),e._v(" "),e._l(e.item.children,function(t){return s("sidebar-menu-item",{key:t.path,attrs:{"is-nest":!0,item:t,"base-path":e.resolvePath(e.item.path)}})})],2)},staticRenderFns:[]},g=s("VU/8")(v,w,!1,null,null,null).exports,S={name:"Sidebar",props:{isCollapse:{type:Boolean,default:!1},height:{type:String,default:"auto"}},components:{SidebarMenuItem:g},data(){return{permission_routes:this.$store.state.permission.routes}},computed:{styleObject(){return{height:this.height}},activeMenu(){const e=this.$route,{meta:t,path:s}=e;return t.activeMenu?t.activeMenu:s}}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-aside",{style:this.styleObject},[t("el-menu",{attrs:{"default-active":this.activeMenu,collapse:this.isCollapse,router:!0}},this._l(this.permission_routes,function(e){return t("sidebar-menu-item",{key:e.path,attrs:{item:e,"base-path":e.path}})}),1)],1)},staticRenderFns:[]},I={name:"Layout",components:{AppHeader:E,Sidebar:s("VU/8")(S,b,!1,null,null,null).exports,AppMain:r},data:()=>({isCollapse:!1}),computed:{height:()=>window.innerHeight-60+"px"},methods:{collapseHandle(e){this.isCollapse=e}}},T={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{attrs:{direction:"vertical"}},[t("app-header",{attrs:{"is-collapse":this.isCollapse,"collapse-handle":this.collapseHandle}}),this._v(" "),t("el-container",[t("sidebar",{attrs:{"is-collapse":this.isCollapse,height:this.height}}),this._v(" "),t("app-main",{attrs:{height:this.height}})],1)],1)},staticRenderFns:[]};var O=s("VU/8")(I,T,!1,function(e){s("tINZ")},null,null).exports;var A={path:"/dashboard",component:O,children:[{path:"",name:"Dashboard",component:()=>s.e(3).then(s.bind(null,"ARoL")),meta:{permissions:["admin"],title:"Dashboard",icon:"el-icon-s-home"}}]};var D={path:"/demo",component:O,meta:{title:"demo",icon:"el-icon-menu"},children:[{path:"editor",name:"Editor",component:()=>s.e(1).then(s.bind(null,"sbDw")),meta:{title:"Editor",permissions:["admin"],icon:"el-icon-edit"}},{path:"upload",name:"Upload",component:()=>s.e(4).then(s.bind(null,"5WrS")),meta:{title:"Upload",permissions:["admin"],icon:"el-icon-upload"}},{path:"echarts",name:"Echarts",component:()=>s.e(0).then(s.bind(null,"FmZ+")),meta:{title:"Echarts",permissions:["admin"],icon:"el-icon-pie-chart"}}]};t.d=function(){const e=L();P.matcher=e.matcher},i.default.use(a.a);const C=a.a.prototype.push;a.a.prototype.push=function(e){return C.call(this,e).catch(e=>console.log(e))};const y=[{path:"/account/login",component:()=>s.e(2).then(s.bind(null,"T+/8")),hidden:!0},{path:"/",redirect:"/dashboard",hidden:!0}];t.b=y;const R=[A,D];t.a=R;const L=()=>new a.a({mode:"history",scrollBehavior:()=>({y:0}),routes:y}),P=L();t.c=P},Zq5Z:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={ADD_VISITED_VIEW:(e,t)=>{e.visitedViews.some(e=>e.path===t.path)||e.visitedViews.push(Object.assign({},t,{title:t.meta.title||"no-name"}))},ADD_CACHED_VIEW:(e,t)=>{e.cachedViews.includes(t.name)||t.meta.noCache||e.cachedViews.push(t.name)},DEL_VISITED_VIEW:(e,t)=>{for(const[s,i]of e.visitedViews.entries())if(i.path===t.path){e.visitedViews.splice(s,1);break}},DEL_CACHED_VIEW:(e,t)=>{for(const s of e.cachedViews)if(s===t.name){const t=e.cachedViews.indexOf(s);e.cachedViews.splice(t,1);break}},DEL_OTHERS_VISITED_VIEWS:(e,t)=>{e.visitedViews=e.visitedViews.filter(e=>e.meta.affix||e.path===t.path)},DEL_OTHERS_CACHED_VIEWS:(e,t)=>{for(const s of e.cachedViews)if(s===t.name){const t=e.cachedViews.indexOf(s);e.cachedViews=e.cachedViews.slice(t,t+1);break}},DEL_ALL_VISITED_VIEWS:e=>{const t=e.visitedViews.filter(e=>e.meta.affix);e.visitedViews=t},DEL_ALL_CACHED_VIEWS:e=>{e.cachedViews=[]},UPDATE_VISITED_VIEW:(e,t)=>{for(let s of e.visitedViews)if(s.path===t.path){s=Object.assign(s,t);break}}},a={addView({dispatch:e},t){e("addVisitedView",t),e("addCachedView",t)},addVisitedView({commit:e},t){e("ADD_VISITED_VIEW",t)},addCachedView({commit:e},t){e("ADD_CACHED_VIEW",t)},delView:({dispatch:e,state:t},s)=>new Promise(i=>{e("delVisitedView",s),e("delCachedView",s),i({visitedViews:[...t.visitedViews],cachedViews:[...t.cachedViews]})}),delVisitedView:({commit:e,state:t},s)=>new Promise(i=>{e("DEL_VISITED_VIEW",s),i([...t.visitedViews])}),delCachedView:({commit:e,state:t},s)=>new Promise(i=>{e("DEL_CACHED_VIEW",s),i([...t.cachedViews])}),delOthersViews:({dispatch:e,state:t},s)=>new Promise(i=>{e("delOthersVisitedViews",s),e("delOthersCachedViews",s),i({visitedViews:[...t.visitedViews],cachedViews:[...t.cachedViews]})}),delOthersVisitedViews:({commit:e,state:t},s)=>new Promise(i=>{e("DEL_OTHERS_VISITED_VIEWS",s),i([...t.visitedViews])}),delOthersCachedViews:({commit:e,state:t},s)=>new Promise(i=>{e("DEL_OTHERS_CACHED_VIEWS",s),i([...t.cachedViews])}),delAllViews:({dispatch:e,state:t},s)=>new Promise(i=>{e("delAllVisitedViews",s),e("delAllCachedViews",s),i({visitedViews:[...t.visitedViews],cachedViews:[...t.cachedViews]})}),delAllVisitedViews:({commit:e,state:t})=>new Promise(s=>{e("DEL_ALL_VISITED_VIEWS"),s([...t.visitedViews])}),delAllCachedViews:({commit:e,state:t})=>new Promise(s=>{e("DEL_ALL_CACHED_VIEWS"),s([...t.cachedViews])}),updateVisitedView({commit:e},t){e("UPDATE_VISITED_VIEW",t)}};t.default={namespaced:!0,state:{visitedViews:[],cachedViews:[]},mutations:i,actions:a}},bREw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mtWM"),a=s.n(i),n=s("zL8q"),o=s("IcnI");const r=a.a.create({timeout:6e4});r.interceptors.request.use(e=>(e.headers["Cache-Control"]="no-cache",o.a.getters.token&&(e.headers.Authorization="Bearer "+o.a.getters.token),e),e=>{console.log(e),Promise.reject(e)}),r.interceptors.response.use(e=>e.data,e=>(console.log("err"+e),e.response&&401===e.response.status?o.a.dispatch("user/resetToken").then(()=>{location.reload()}):Object(n.Message)({message:e.message,type:"error",duration:5e3}),Promise.reject(e)));var c=r;var l=s("TIfe"),d=s("YaEn");const u={token:Object(l.a)(),userId:"0",name:"washon",avatar:"static/img/portrait.jpg",permissions:[]},h={login({commit:e},t){const{userName:s,password:i}=t;return new Promise((t,n)=>{(a={userName:s.trim(),password:i},c({url:"/api/user/login",method:"post",data:a})).then(s=>{s.success&&(e("SET_TOKEN",s.token),Object(l.c)(s.token)),t(s)}).catch(e=>{n(e)})});var a},getInfo:({commit:e,state:t})=>new Promise((s,i)=>{(t.token,c({url:"/api/user",method:"get"})).then(t=>{e("SET_USERID",t.id),e("SET_NAME",t.name),e("SET_AVATAR",t.headIcon),e("SET_PERMISSIONS",t.permissions),s(t)}).catch(e=>{i(e)})}),logout:({commit:e,state:t})=>new Promise((s,i)=>{(t.token,c({url:"/api/user/logout",method:"post"})).then(()=>{e("SET_TOKEN",""),e("SET_USERID",""),e("SET_NAME",""),e("SET_AVATAR",""),Object(l.b)(),Object(d.d)(),s()}).catch(e=>{i(e)})}),resetToken:({commit:e})=>new Promise(t=>{e("SET_TOKEN",""),e("SET_USERID",""),e("SET_NAME",""),e("SET_AVATAR",""),Object(l.b)(),t()})};t.default={namespaced:!0,state:u,mutations:{SET_TOKEN:(e,t)=>{e.token=t},SET_USERID:(e,t)=>{e.userId=t},SET_NAME:(e,t)=>{e.name=t},SET_AVATAR:(e,t)=>{e.avatar=t},SET_PERMISSIONS:(e,t)=>{e.permissions=t}},actions:h}},"m/j8":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={addErrorLog({commit:e},t){e("ADD_ERROR_LOG",t)},clearErrorLog({commit:e}){e("CLEAR_ERROR_LOG")}};t.default={namespaced:!0,state:{logs:[]},mutations:{ADD_ERROR_LOG:(e,t)=>{e.logs.push(t)},CLEAR_ERROR_LOG:e=>{e.logs.splice(0)}},actions:i}},tINZ:function(e,t){},tvR6:function(e,t){},"w+hY":function(e,t,s){var i={"./app.js":"WSTi","./errorLog.js":"m/j8","./permission.js":"19nU","./settings.js":"THyH","./tagsView.js":"Zq5Z","./user.js":"bREw"};function a(e){return s(n(e))}function n(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="w+hY"}},["NHnr"]);
//# sourceMappingURL=app.45a58514221ce7cd1075.js.map